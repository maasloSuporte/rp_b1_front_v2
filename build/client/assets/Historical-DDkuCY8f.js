import{u as q,r as s,j as r}from"./vendor-react-GjWeapsa.js";import{q as S}from"./queues.service-_ltWKFCw.js";import{D as I}from"./DynamicTable-2EKp7iLd.js";import{L as k}from"./Loading-DtjK9lpy.js";import"./api-Cdl3BoFR.js";function N(){const{t:e}=q("translation"),[n,c]=s.useState([]),[u,m]=s.useState(0),[o,p]=s.useState(""),[g,l]=s.useState(!0),d=s.useMemo(()=>[{key:"name",label:e("pages.queues.name"),filterable:!0,sortable:!1,filterType:"text"},{key:"status",label:e("pages.queues.status"),filterable:!0,sortable:!1,filterType:"text"},{key:"processedItems",label:e("pages.queues.processedItems"),filterable:!1,sortable:!1,filterType:"text"},{key:"lastProcessed",label:e("pages.queues.lastProcessed"),filterable:!1,sortable:!0,filterType:"text"},{key:"actions",label:e("pages.queues.actions"),type:"action"}],[e]),f=s.useMemo(()=>[{label:e("pages.queues.viewDetails"),action:"view",icon:"eye"}],[e]);s.useEffect(()=>{b()},[o]);const b=async()=>{try{l(!0);const t=new URLSearchParams(o),x=parseInt(t.get("pageNumber")||"1"),h=parseInt(t.get("pageSize")||"10"),i=await S.getAllQueues({pageNumber:x,pageSize:h})||[];m(i?.totalItems||0),c((i?.items||[]).map(a=>({id:a.id,name:a.name||"-",processedItems:a.processedItems||0,lastProcessed:a.lastProcessed?new Date(a.lastProcessed).toLocaleString():"-"})))}catch(t){console.error("Erro ao carregar histÃ³rico de queues:",t)}finally{l(!1)}},y=t=>{t.action==="view"&&console.log("View historical queue:",t.item)};return g?r.jsx(k,{text:e("pages.queues.loadingHistorical")}):r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("h2",{className:"text-3xl sm:text-4xl font-semibold text-text-primary mb-8",children:e("pages.queues.titleHistorical")}),r.jsx("section",{className:"mt-6",children:r.jsx(I,{columns:d,data:n,totalItems:u,pageSize:10,pageSizeOptions:[10,25,50,100],showFirstLastButtons:!0,actionMenuItems:f,onActionClick:y,onQueryParamsChange:p})})]})}export{N as default};
