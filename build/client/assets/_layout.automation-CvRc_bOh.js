import{d as j,w}from"./vendor-router-cHSbYr8A.js";import{u as S,r as o,j as a}from"./vendor-react-GjWeapsa.js";import{p as l}from"./projects.service-DTH5gNiz.js";import{u as k}from"./modal.service-0dNnnw9p.js";import{u as N}from"./notification.service-DGIhKrzX.js";import{D as v}from"./DynamicTable-2EKp7iLd.js";import"./api-Cdl3BoFR.js";function P(){const{t:e}=S("translation"),s=j(),m=k(t=>t.confirmDelete),r=N(t=>t.showToast),[i,u]=o.useState([]),[d,p]=o.useState(0),[n,f]=o.useState("SortField=id&SortOrder=asc&PageNumber=1&PageSize=100"),g=o.useMemo(()=>i.map(t=>({...t,active:t.active?e("common.status.active"):e("common.status.inactive")})),[i,e]);o.useEffect(()=>{c()},[n]);const c=async()=>{try{const t=await l.getAllProjects({pageNumber:1,pageSize:100},n);u(t.items),p(t.totalItems)}catch(t){console.error("Erro ao carregar projetos:",t)}},x=o.useMemo(()=>[{key:"name",filterKey:"ProjectName",label:e("pages.automation.columnName"),filterable:!0,sortable:!1,filterType:"text"},{key:"packageVersionId",label:e("pages.automation.columnPackageVersion"),filterable:!0,sortable:!1,filterType:"text"},{key:"active",filterKey:"Status",label:e("pages.automation.columnStatus"),filterable:!0,sortable:!1,filterType:"text"},{key:"createdAt",label:e("pages.automation.columnCreatedAt"),filterable:!0,sortable:!1,filterType:"text"},{key:"actions",label:e("common.actions.label"),type:"action"}],[e]),b=o.useMemo(()=>[{label:e("pages.automation.edit"),action:"edit",icon:"edit"},{label:e("pages.automation.delete"),action:"delete",icon:"trash"}],[e]),h=async t=>{if(await m({itemName:t.name}))try{await l.deleteProject({id:t.id}),r(e("common.states.success"),e("pages.automation.deleteSuccess"),"success"),c()}catch{r(e("common.states.error"),e("pages.automation.deleteError"),"error")}},y=async t=>{switch(t.action){case"edit":s(`/project/${t.item.id}`);break;case"delete":await h(t.item);break}};return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-8",children:[a.jsx("h1",{className:"text-3xl sm:text-4xl font-semibold text-text-primary",children:e("pages.automation.title")}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>s("/project"),className:"inline-flex items-center justify-center px-5 py-2.5 rounded-xl font-medium text-white bg-orange hover:bg-orange/90 shadow-sm hover:shadow transition-all duration-200",children:e("pages.automation.createProject")}),a.jsx("button",{onClick:()=>s("/execution"),className:"inline-flex items-center justify-center px-5 py-2.5 rounded-xl font-medium text-white bg-purple hover:bg-purple/90 shadow-sm hover:shadow transition-all duration-200",children:e("pages.automation.execute")})]})]}),a.jsx("section",{className:"mt-6",children:a.jsx(v,{columns:x,data:g,totalItems:d,pageSize:5,pageSizeOptions:[5,10,25,100],showFirstLastButtons:!0,actionMenuItems:b,onActionClick:y,onQueryParamsChange:f})})]})}const F=w(function(){return a.jsx(P,{})});export{F as default};
