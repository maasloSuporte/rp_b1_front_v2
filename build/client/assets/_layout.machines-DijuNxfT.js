import{d as x,w as g}from"./vendor-router-C5YTkdq4.js";import{r as s,j as t}from"./vendor-react-D3RE0R8o.js";import{d as c}from"./devices.service-BEkRjjz1.js";import{u as N}from"./modal.service-DONi3Oau.js";import{u as v}from"./notification.service-CvsIel6B.js";import{D as w}from"./DynamicTable-BPyWbqtX.js";import"./api-BB9j10S9.js";function k(){const i=x(),l=N(e=>e.confirmDelete),o=v(e=>e.showToast),[m,d]=s.useState([]),[u,f]=s.useState(0),[r,h]=s.useState(""),p=[{key:"machineName",label:"Name",filterable:!0,sortable:!1,filterType:"text"},{key:"environment",label:"Environment",filterable:!0,sortable:!1,filterType:"text"},{key:"hostName",label:"Hostname",filterable:!0,sortable:!1,filterType:"text"},{key:"ip",label:"IP",filterable:!0,sortable:!1,filterType:"text"},{key:"actions",label:"Actions",type:"action"}],b=[{label:"Edit",action:"edit",icon:"edit"},{label:"Deleted",action:"deleted",icon:"block"}];s.useEffect(()=>{n()},[r]);const n=async()=>{try{const e=await c.getAllDevices(r);f(e.totalItems),d(e.items.map(a=>({id:a.id,machineName:a.machineName,environment:a.environment,hostName:a.hostName,ip:a.ip})))}catch(e){console.error("Erro ao carregar devices:",e)}},y=async e=>{switch(e.action){case"edit":i(`/machine/${e.item.id}`);break;case"deleted":if(await l({itemName:e.item.hostName}))try{await c.deleteDevice({id:e.item.id}),o("Sucess","Machine deleted successfully","success"),n()}catch{o("Error","Failed to delete machine","error")}break}};return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-8",children:[t.jsx("h1",{className:"text-3xl sm:text-4xl font-semibold text-text-primary",children:"Machines"}),t.jsx("button",{onClick:()=>i("/machine/create"),className:"inline-flex items-center justify-center px-5 py-2.5 rounded-xl font-medium text-white bg-orange hover:bg-orange/90 shadow-sm hover:shadow transition-all duration-200",children:"Create Machine Template"})]}),t.jsx("section",{className:"mt-6",children:t.jsx(w,{columns:p,data:m,totalItems:u,pageSize:5,pageSizeOptions:[5,10,25,100],showFirstLastButtons:!0,actionMenuItems:b,onActionClick:y,onQueryParamsChange:h})})]})}const A=g(function(){return t.jsx(k,{})});export{A as default};
