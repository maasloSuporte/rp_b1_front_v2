import{v as b,r as N,j as e}from"./vendor-react-D3RE0R8o.js";import{c as f,d as j}from"./vendor-router-C5YTkdq4.js";import{a as d}from"./assets.service-D2l1yFxQ.js";import{u as v}from"./notification.service-CvsIel6B.js";import"./api-BB9j10S9.js";function C(){const{id:i}=f(),o=j(),n=!!i,m=v(s=>s.showToast),{register:l,handleSubmit:u,formState:{errors:a},setValue:t,watch:x}=b({defaultValues:{name:"",type:"Text",description:"",value:"",userName:""}}),c=x("type");N.useEffect(()=>{n&&i&&p(Number(i))},[i,n]);const p=async s=>{try{const r=await d.getByIdAsset(s);console.log(r),t("name",r.name),t("type",r.type),t("description",r.description),t("value",r.value),t("userName",r.userName||"")}catch(r){console.error("Erro ao carregar asset:",r)}},g=async s=>{try{if(n&&i){const r={name:s.name,type:s.type,description:s.description,value:s.value,userName:s.userName,globalValue:s.globalValue,projectId:s.projectId};await d.updateAsset(Number(i),r),m("Sucess","Asset edited successfully","success"),o("/assets")}else{const r={name:s.name,type:s.type,description:s.description,value:s.value,userName:s.userName};await d.createAsset(r),m("Success","Asset created successfully","success"),o("/assets")}}catch(r){const h=r.response?.data?.message||"Falha ao salvar asset";m("Error",h,"error")}},y=s=>{const r=s.target.value;t("type",r),r==="Bool"?t("value","false"):(t("value",""),t("userName",""))};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("button",{onClick:()=>o("/assets"),className:"text-primary hover:text-primary/80 mb-4",children:"â† Voltar"}),e.jsx("h1",{className:"text-4xl font-semibold text-text-primary",children:n?"Edit Asset":"Create Asset"})]}),e.jsxs("form",{onSubmit:u(g),className:"bg-white rounded-lg shadow-card p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...l("name",{required:"Name is required",minLength:{value:5,message:"Name must be at least 5 characters"}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"}),a.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.name.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...l("type",{required:"Type is required"}),onChange:y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"Text",children:"Text"}),e.jsx("option",{value:"Integer",children:"Integer"}),e.jsx("option",{value:"Bool",children:"Bool"}),e.jsx("option",{value:"Credential",children:"Credential"})]}),a.type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.type.message})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{...l("description",{required:"Description is required",minLength:{value:5,message:"Description must be at least 5 characters"}}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"}),a.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.description.message})]}),c==="Text"&&e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Value ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...l("value",{required:"Value is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"}),a.value&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.value.message})]}),c==="Integer"&&e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Value ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",...l("value",{required:"Value is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"}),a.value&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.value.message})]}),c==="Bool"&&e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Value ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...l("value",{required:"Value is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"true",children:"True"}),e.jsx("option",{value:"false",children:"False"})]}),a.value&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.value.message})]}),c==="Credential"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Value ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",...l("value",{required:"Value is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"}),a.value&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.value.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["User Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...l("userName",{required:c==="Credential"?"User Name is required":!1}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"}),a.userName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.userName.message})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>o("/assets"),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 rounded-md hover:bg-primary/90",children:n?"Update":"Create"})]})]})]})}export{C as default};
