import{r as c,j as r}from"./vendor-react-D3RE0R8o.js";const f={edit:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":!0,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),trash:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":!0,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),block:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":!0,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})};function G({columns:l,data:v,actionMenuItems:_=[],pageSize:$=5,pageSizeOptions:P=[5,10,25,100],totalItems:b=0,showFirstLastButtons:U=!0,onActionClick:w,onQueryParamsChange:y}){const[p,j]=c.useState({}),[x,k]=c.useState(""),[d,N]=c.useState({column:"id",direction:"asc"}),[t,T]=c.useState({pageSize:$,pageNumber:0}),u=c.useRef(null),B=3e3,C=c.useCallback(()=>{const e=[];Object.entries(p).filter(([s,a])=>!(!a||Array.isArray(a)&&a.length===0||a==="")).forEach(([s,a])=>{const q=l.find(I=>I.key===s)?.filterKey??s,H=Array.isArray(a)?a.join(","):String(a);e.push(`${q}=${encodeURIComponent(H)}`)});const o=l.find(s=>s.key===d.column)?.sortKey||d.column;return o&&(e.push(`SortField=${o}`),e.push(`SortOrder=${d.direction}`)),e.push(`PageSize=${t.pageSize}`),e.push(`PageNumber=${t.pageNumber+1}`),e.join("&")},[p,d,t,l]),h=c.useCallback(()=>{if(y){const e=C();y(e)}},[C,y]);c.useEffect(()=>(u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{h()},B),()=>{u.current&&clearTimeout(u.current)}),[p,h]),c.useEffect(()=>{u.current&&(clearTimeout(u.current),u.current=null),h()},[d,t,h]);const E=(e,n)=>{w&&w({action:e,item:n})},S=(e,n)=>{const o=l.find(s=>s.key===e);o?.filterType==="select"&&o.selectMode==="single"&&n===""?j(s=>{const a={...s};return delete a[e],a}):j(s=>({...s,[e]:n}))},z=e=>{e.sortable&&(d.column===e.key?d.direction==="asc"?N({column:"",direction:"desc"}):N({column:e.key,direction:"desc"}):N({column:e.key,direction:"asc"}))},m=(e,n)=>{T({pageSize:n||t.pageSize,pageNumber:e})},O=e=>!e.sortable||d.column!==e.key?"⇅":d.direction==="asc"?"↑":"↓",R=()=>{j({}),k("")},i=Math.max(1,Math.ceil(b/t.pageSize)),L=b===0?0:t.pageNumber*t.pageSize+1,M=Math.min((t.pageNumber+1)*t.pageSize,b),A=l.filter(e=>e.filterable),g=l.find(e=>e.key===x),W=A.length>0,D=()=>{if(i<=7)return Array.from({length:i},(n,o)=>o);const e=t.pageNumber;return e<=3?[0,1,2,3,4,"ellipsis",i-1]:e>=i-4?[0,"ellipsis",...Array.from({length:5},(n,o)=>i-5+o)]:[0,"ellipsis",e-1,e,e+1,"ellipsis",i-1]};return r.jsx("div",{className:"bg-white rounded-2xl overflow-visible border border-border shadow-[0_4px_6px_-1px_rgba(0,0,0,0.07),0_2px_4px_-2px_rgba(0,0,0,0.05)]",children:r.jsxs("div",{className:"p-6",children:[W&&r.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[r.jsxs("select",{value:x,onChange:e=>k(e.target.value),className:"rounded-lg border border-border bg-white px-4 py-2.5 text-base text-text-primary focus:border-purple focus:ring-2 focus:ring-purple/20 outline-none min-w-[180px]",children:[r.jsx("option",{value:"",children:"Filtrar por..."}),A.map(e=>r.jsx("option",{value:e.key,children:e.label},e.key))]}),g&&(g.filterType==="text"?r.jsx("input",{type:"text",placeholder:`Buscar em ${g.label}...`,value:p[x]??"",onChange:e=>S(x,e.target.value),className:"rounded-lg border border-border bg-white px-4 py-2.5 text-base text-text-primary placeholder:text-text-secondary focus:border-purple focus:ring-2 focus:ring-purple/20 outline-none min-w-[200px]"}):r.jsxs("select",{value:Array.isArray(p[x])?"":p[x]??"",onChange:e=>S(x,e.target.value),className:"rounded-lg border border-border bg-white px-4 py-2.5 text-base text-text-primary focus:border-purple focus:ring-2 focus:ring-purple/20 outline-none min-w-[180px]",children:[r.jsx("option",{value:"",children:"Todos"}),g.filterOptions?.map(e=>r.jsx("option",{value:e.id,children:e.label},String(e.id)))]})),r.jsx("button",{type:"button",onClick:R,disabled:!Object.keys(p).some(e=>{const n=p[e];return n!==""&&n!=null&&(!Array.isArray(n)||n.length>0)}),className:"inline-flex items-center justify-center rounded-lg border border-border bg-white p-2.5 text-text-secondary hover:bg-error/10 hover:text-error hover:border-error/30 disabled:opacity-40 disabled:pointer-events-none transition-colors",title:"Limpar filtros","aria-label":"Limpar filtros",children:f.trash})]}),r.jsx("div",{className:"min-w-0 w-full overflow-x-auto",children:r.jsxs("table",{className:"min-w-full w-full border-collapse",children:[r.jsx("thead",{children:r.jsx("tr",{className:"border-b border-gray-200/60",children:l.map(e=>r.jsx("th",{className:"px-6 py-5 text-left text-sm font-bold text-text-primary uppercase tracking-wider first:pl-8 last:pr-8",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{children:e.label}),e.sortable&&r.jsx("button",{onClick:()=>z(e),className:"p-1 rounded text-text-secondary hover:text-text-primary hover:bg-border transition-colors","aria-label":`Ordenar por ${e.label}`,children:O(e)})]})},e.key))})}),r.jsx("tbody",{children:v.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:l.length,className:"px-6 py-12 text-center first:pl-8 last:pr-8",children:[r.jsx("p",{className:"text-base text-text-secondary",children:"Nenhum resultado encontrado na busca."}),r.jsx("p",{className:"mt-1 text-sm text-text-secondary/80",children:"Tente ajustar os filtros ou limpar a busca para ver mais resultados."})]})}):v.map((e,n)=>r.jsx("tr",{className:`transition-colors ${n%2===0?"bg-white":"bg-gray-50/50"} hover:bg-purple-100/20`,children:l.map(o=>r.jsx("td",{className:"px-6 py-5 text-base text-text-primary first:pl-8 last:pr-8",children:o.type==="action"?r.jsx("div",{className:"flex items-center gap-1.5 flex-wrap",children:_.filter(s=>!s.showCondition||s.showCondition(e)).map(s=>{const a=s.action==="delete"||s.action==="deleted",F=f[s.icon??"edit"]??f.edit;return r.jsx("button",{onClick:()=>E(s.action,e),className:`p-2 rounded-lg transition-colors ${a?"text-error hover:bg-error/10":"text-purple hover:bg-purple-100"}`,title:s.label,"aria-label":s.label,children:a?f.trash:F},s.action)})}):r.jsx("span",{className:"block min-w-0",children:e[o.key]??"—"})},o.key))},n))})]})}),r.jsxs("div",{className:"mt-6 pt-4 flex flex-col sm:flex-row items-center justify-between gap-4 bg-transparent",children:[r.jsxs("div",{className:"flex items-center gap-4 w-full sm:w-auto order-2 sm:order-1",children:[r.jsxs("p",{className:"text-base text-text-secondary",children:["Mostrando ",r.jsx("span",{className:"font-medium text-text-primary",children:L}),L!==M&&r.jsxs(r.Fragment,{children:["–",r.jsx("span",{className:"font-medium text-text-primary",children:M})]})," ","de ",r.jsx("span",{className:"font-medium text-text-primary",children:b})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-base text-text-secondary",children:"Por página"}),r.jsx("select",{value:t.pageSize,onChange:e=>m(0,Number(e.target.value)),className:"border border-border/80 rounded-lg px-2.5 py-1.5 text-base text-text-primary bg-white focus:ring-2 focus:ring-purple-100 focus:border-purple outline-none",children:P.map(e=>r.jsx("option",{value:e,children:e},e))})]})]}),r.jsxs("div",{className:"flex items-center gap-1.5 w-full sm:w-auto justify-center sm:justify-end order-1 sm:order-2",children:[r.jsx("button",{onClick:()=>m(Math.max(0,t.pageNumber-1)),disabled:t.pageNumber===0,className:"p-2 rounded-lg text-text-secondary hover:bg-white hover:text-purple disabled:opacity-40 disabled:pointer-events-none transition-colors border border-transparent hover:border-border/80","aria-label":"Página anterior",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),D().map((e,n)=>e==="ellipsis"?r.jsx("span",{className:"px-2 text-text-secondary",children:"…"},`e-${n}`):r.jsx("button",{onClick:()=>m(e),className:`min-w-[2.5rem] h-10 rounded-lg text-base font-medium transition-colors ${t.pageNumber===e?"bg-purple text-white shadow-sm":"text-text-primary hover:bg-white border border-border/80"}`,children:e+1},e)),r.jsx("button",{onClick:()=>m(Math.min(i-1,t.pageNumber+1)),disabled:t.pageNumber>=i-1,className:"p-2 rounded-lg text-text-secondary hover:bg-white hover:text-purple disabled:opacity-40 disabled:pointer-events-none transition-colors border border-transparent hover:border-border/80","aria-label":"Próxima página",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),r.jsxs("div",{className:"sm:hidden mt-4 pt-4 flex justify-between",children:[r.jsx("button",{onClick:()=>m(Math.max(0,t.pageNumber-1)),disabled:t.pageNumber===0,className:"px-4 py-2 rounded-lg border border-border/80 text-sm font-medium text-text-primary bg-white hover:bg-purple-100/50 disabled:opacity-50",children:"Anterior"}),r.jsxs("span",{className:"py-2 text-sm text-text-secondary",children:[t.pageNumber+1," / ",i]}),r.jsx("button",{onClick:()=>m(Math.min(i-1,t.pageNumber+1)),disabled:t.pageNumber>=i-1,className:"px-4 py-2 rounded-lg border border-border/80 text-sm font-medium text-text-primary bg-white hover:bg-purple-100/50 disabled:opacity-50",children:"Próximo"})]})]})})}export{G as D};
