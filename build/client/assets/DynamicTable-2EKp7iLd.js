import{u as Q,r as p,j as r}from"./vendor-react-GjWeapsa.js";const y={download:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":!0,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"arrow-up":r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":!0,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11l5-5m0 0l5 5m-5-5v12"})}),edit:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":!0,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),trash:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":!0,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),block:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":!0,children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),play:r.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":!0,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),preview:r.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":!0,children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})};function Z({columns:c,data:b,actionMenuItems:P=[],pageSize:W=5,pageSizeOptions:$=[5,10,25,100],totalItems:g=0,showFirstLastButtons:X=!0,onActionClick:w,onQueryParamsChange:k,initialSortField:T="id",initialSortOrder:E="asc",selectedRowIds:C=[],onSelectionChange:v}){const{t:a}=Q("translation"),[u,N]=p.useState({}),[m,L]=p.useState(""),[d,S]=p.useState({column:T,direction:E}),[n,R]=p.useState({pageSize:W,pageNumber:0}),x=p.useRef(null),D=3e3,M=p.useCallback(()=>{const e=[];Object.entries(u).filter(([s,i])=>!(!i||Array.isArray(i)&&i.length===0||i==="")).forEach(([s,i])=>{const G=c.find(K=>K.key===s)?.filterKey??s,J=Array.isArray(i)?i.join(","):String(i);e.push(`${G}=${encodeURIComponent(J)}`)});const o=c.find(s=>s.key===d.column)?.sortKey||d.column;return o&&(e.push(`SortField=${o}`),e.push(`SortOrder=${d.direction}`)),e.push(`PageSize=${n.pageSize}`),e.push(`PageNumber=${n.pageNumber+1}`),e.join("&")},[u,d,n,c]),f=p.useCallback(()=>{if(k){const e=M();k(e)}},[M,k]);p.useEffect(()=>(x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{f()},D),()=>{x.current&&clearTimeout(x.current)}),[u,f]),p.useEffect(()=>{x.current&&(clearTimeout(x.current),x.current=null),f()},[d,n,f]);const O=(e,t)=>{w&&w({action:e,item:t})},A=(e,t)=>{const o=c.find(s=>s.key===e);o?.filterType==="select"&&o.selectMode==="single"&&t===""?N(s=>{const i={...s};return delete i[e],i}):N(s=>({...s,[e]:t}))},H=e=>{if(e.sortable)if(d.column===e.key){const t=d.direction==="asc"?"desc":"asc";S({column:e.key,direction:t})}else S({column:e.key,direction:"asc"})},h=(e,t)=>{R({pageSize:t||n.pageSize,pageNumber:e})},q=e=>!e.sortable||d.column!==e.key?"⇅":d.direction==="asc"?"↑":"↓",I=()=>{N({}),L("")},l=Math.max(1,Math.ceil(g/n.pageSize)),F=g===0?0:n.pageNumber*n.pageSize+1,_=Math.min((n.pageNumber+1)*n.pageSize,g),B=c.filter(e=>e.filterable),j=c.find(e=>e.key===m),U=B.length>0,V=()=>{if(l<=7)return Array.from({length:l},(t,o)=>o);const e=n.pageNumber;return e<=3?[0,1,2,3,4,"ellipsis",l-1]:e>=l-4?[0,"ellipsis",...Array.from({length:5},(t,o)=>l-5+o)]:[0,"ellipsis",e-1,e,e+1,"ellipsis",l-1]};return r.jsx("div",{className:"bg-white rounded-2xl overflow-visible border border-border shadow-[0_4px_6px_-1px_rgba(0,0,0,0.07),0_2px_4px_-2px_rgba(0,0,0,0.05)]",children:r.jsxs("div",{className:"p-6",children:[U&&r.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[r.jsxs("select",{value:m,onChange:e=>L(e.target.value),className:"rounded-lg border border-border bg-white px-4 py-2.5 text-base text-text-primary focus:border-purple focus:ring-2 focus:ring-purple/20 outline-none min-w-[180px]",children:[r.jsx("option",{value:"",children:a("common.table.filterPlaceholder")}),B.map(e=>r.jsx("option",{value:e.key,children:e.label},e.key))]}),j&&(j.filterType==="text"?r.jsx("input",{type:"text",placeholder:a("common.table.searchIn",{label:j.label}),value:u[m]??"",onChange:e=>A(m,e.target.value),className:"rounded-lg border border-border bg-white px-4 py-2.5 text-base text-text-primary placeholder:text-text-secondary focus:border-purple focus:ring-2 focus:ring-purple/20 outline-none min-w-[200px]"}):r.jsxs("select",{value:Array.isArray(u[m])?"":u[m]??"",onChange:e=>A(m,e.target.value),className:"rounded-lg border border-border bg-white px-4 py-2.5 text-base text-text-primary focus:border-purple focus:ring-2 focus:ring-purple/20 outline-none min-w-[180px]",children:[r.jsx("option",{value:"",children:a("common.table.all")}),j.filterOptions?.map(e=>r.jsx("option",{value:e.id,children:e.label},String(e.id)))]})),r.jsx("button",{type:"button",onClick:I,disabled:!Object.keys(u).some(e=>{const t=u[e];return t!==""&&t!=null&&(!Array.isArray(t)||t.length>0)}),className:"inline-flex items-center justify-center rounded-lg border border-border bg-white p-2.5 text-text-secondary hover:bg-error/10 hover:text-error hover:border-error/30 disabled:opacity-40 disabled:pointer-events-none transition-colors",title:a("common.table.clearFilters"),"aria-label":a("common.table.clearFilters"),children:y.trash})]}),r.jsx("div",{className:"min-w-0 w-full overflow-x-auto",children:r.jsxs("table",{className:"min-w-full w-full border-collapse",children:[r.jsx("thead",{children:r.jsx("tr",{className:"border-b border-gray-200/60",children:c.map(e=>r.jsx("th",{className:"px-6 py-5 text-left text-sm font-bold text-text-primary uppercase tracking-wider first:pl-8 last:pr-8",children:r.jsx("div",{className:"flex items-center gap-2",children:e.type==="checkbox"?r.jsx("input",{type:"checkbox",checked:b.length>0&&b.every(t=>C.includes(t.id)),onChange:t=>{v&&b.forEach(o=>v(o.id,t.target.checked))},className:"rounded border-gray-300 text-purple focus:ring-purple","aria-label":a("common.table.selectAll")}):r.jsxs(r.Fragment,{children:[r.jsx("span",{children:e.label}),e.sortable&&r.jsx("button",{onClick:()=>H(e),className:"p-1 rounded text-text-secondary hover:text-text-primary hover:bg-border transition-colors","aria-label":a("common.table.sortBy",{label:e.label}),children:q(e)})]})})},e.key))})}),r.jsx("tbody",{children:b.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:c.length,className:"px-6 py-12 text-center first:pl-8 last:pr-8",children:[r.jsx("p",{className:"text-base text-text-secondary",children:a("common.table.noResults")}),r.jsx("p",{className:"mt-1 text-sm text-text-secondary/80",children:a("common.table.noResultsHint")})]})}):b.map((e,t)=>r.jsx("tr",{className:`transition-colors ${t%2===0?"bg-white":"bg-gray-50/50"} hover:bg-purple-100/20`,children:c.map(o=>r.jsx("td",{className:"px-6 py-5 text-base text-text-primary first:pl-8 last:pr-8",children:o.type==="checkbox"?r.jsx("input",{type:"checkbox",checked:C.includes(e.id),onChange:s=>v?.(e.id,s.target.checked),className:"rounded border-gray-300 text-purple focus:ring-purple","aria-label":`Selecionar ${e.id}`}):o.type==="action"?r.jsx("div",{className:"flex items-center gap-1.5 flex-wrap",children:P.filter(s=>!s.showCondition||s.showCondition(e)).map(s=>{const i=s.action==="delete"||s.action==="deleted",z=y[s.icon??"edit"]??y.edit;return r.jsx("button",{onClick:()=>O(s.action,e),className:`p-2 rounded-lg transition-colors ${i?"text-error hover:bg-error/10":"text-purple hover:bg-purple-100"}`,title:s.label,"aria-label":s.label,children:i?y.trash:z},s.action)})}):r.jsx("span",{className:"block min-w-0",children:e[o.key]??"—"})},o.key))},t))})]})}),r.jsxs("div",{className:"mt-6 pt-4 flex flex-col sm:flex-row items-center justify-between gap-4 bg-transparent",children:[r.jsxs("div",{className:"flex items-center gap-4 w-full sm:w-auto order-2 sm:order-1",children:[r.jsxs("p",{className:"text-base text-text-secondary",children:[a("common.table.showing")," ",r.jsx("span",{className:"font-medium text-text-primary",children:F}),F!==_&&r.jsxs(r.Fragment,{children:["–",r.jsx("span",{className:"font-medium text-text-primary",children:_})]})," ",a("common.table.of")," ",r.jsx("span",{className:"font-medium text-text-primary",children:g})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-base text-text-secondary",children:a("common.table.perPage")}),r.jsx("select",{value:n.pageSize,onChange:e=>h(0,Number(e.target.value)),className:"border border-border/80 rounded-lg px-2.5 py-1.5 text-base text-text-primary bg-white focus:ring-2 focus:ring-purple-100 focus:border-purple outline-none",children:$.map(e=>r.jsx("option",{value:e,children:e},e))})]})]}),r.jsxs("div",{className:"flex items-center gap-1.5 w-full sm:w-auto justify-center sm:justify-end order-1 sm:order-2",children:[r.jsx("button",{onClick:()=>h(Math.max(0,n.pageNumber-1)),disabled:n.pageNumber===0,className:"p-2 rounded-lg text-text-secondary hover:bg-white hover:text-purple disabled:opacity-40 disabled:pointer-events-none transition-colors border border-transparent hover:border-border/80","aria-label":"Página anterior",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),V().map((e,t)=>e==="ellipsis"?r.jsx("span",{className:"px-2 text-text-secondary",children:"…"},`e-${t}`):r.jsx("button",{onClick:()=>h(e),className:`min-w-[2.5rem] h-10 rounded-lg text-base font-medium transition-colors ${n.pageNumber===e?"bg-purple text-white shadow-sm":"text-text-primary hover:bg-white border border-border/80"}`,children:e+1},e)),r.jsx("button",{onClick:()=>h(Math.min(l-1,n.pageNumber+1)),disabled:n.pageNumber>=l-1,className:"p-2 rounded-lg text-text-secondary hover:bg-white hover:text-purple disabled:opacity-40 disabled:pointer-events-none transition-colors border border-transparent hover:border-border/80","aria-label":a("common.table.nextPage"),children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),r.jsxs("div",{className:"sm:hidden mt-4 pt-4 flex justify-between",children:[r.jsx("button",{onClick:()=>h(Math.max(0,n.pageNumber-1)),disabled:n.pageNumber===0,className:"px-4 py-2 rounded-lg border border-border/80 text-sm font-medium text-text-primary bg-white hover:bg-purple-100/50 disabled:opacity-50",children:a("common.table.previous")}),r.jsxs("span",{className:"py-2 text-sm text-text-secondary",children:[n.pageNumber+1," / ",l]}),r.jsx("button",{onClick:()=>h(Math.min(l-1,n.pageNumber+1)),disabled:n.pageNumber>=l-1,className:"px-4 py-2 rounded-lg border border-border/80 text-sm font-medium text-text-primary bg-white hover:bg-purple-100/50 disabled:opacity-50",children:a("common.table.next")})]})]})})}export{Z as D};
