import{d as y,w as N}from"./vendor-router-cHSbYr8A.js";import{u as v,r as i,j as a}from"./vendor-react-GjWeapsa.js";import{d as l}from"./devices.service-uF7n0LQ8.js";import{u as w}from"./modal.service-0dNnnw9p.js";import{u as S}from"./notification.service-DGIhKrzX.js";import{D as k}from"./DynamicTable-2EKp7iLd.js";import"./api-Cdl3BoFR.js";function j(){const{t:e}=v("translation"),o=y(),m=w(t=>t.confirmDelete),r=S(t=>t.showToast),[d,u]=i.useState([]),[h,p]=i.useState(0),[n,f]=i.useState("PageNumber=1&PageSize=5&SortField=id&SortOrder=asc"),b=i.useMemo(()=>[{key:"machineName",label:e("pages.assets.name"),filterable:!0,sortable:!1,filterType:"text"},{key:"environment",label:e("pages.machines.environment"),filterable:!0,sortable:!1,filterType:"text"},{key:"hostName",label:e("pages.machines.hostname"),filterable:!0,sortable:!1,filterType:"text"},{key:"ip",label:e("pages.machines.ip"),filterable:!0,sortable:!1,filterType:"text"},{key:"actions",label:e("common.actions.label"),type:"action"}],[e]),g=i.useMemo(()=>[{label:e("common.buttons.edit"),action:"edit",icon:"edit"},{label:e("pages.assets.deleted"),action:"deleted",icon:"block"}],[e]);i.useEffect(()=>{c()},[n]);const c=async()=>{try{const t=await l.getAllDevices(n);p(t.totalItems),u(t.items.map(s=>({id:s.id,machineName:s.machineName,environment:s.environment,hostName:s.hostName,ip:s.ip})))}catch(t){console.error("Erro ao carregar devices:",t)}},x=async t=>{switch(t.action){case"edit":o(`/machine/${t.item.id}`);break;case"deleted":if(await m({itemName:t.item.hostName}))try{await l.deleteDevice({id:t.item.id}),r(e("common.states.success"),e("pages.machines.deleteSuccess"),"success"),c()}catch{r(e("common.states.error"),e("pages.machines.deleteError"),"error")}break}};return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-8",children:[a.jsx("h1",{className:"text-3xl sm:text-4xl font-semibold text-text-primary",children:e("pages.machines.title")}),a.jsx("button",{onClick:()=>o("/machine/create"),className:"inline-flex items-center justify-center px-5 py-2.5 rounded-xl font-medium text-white bg-orange hover:bg-orange/90 shadow-sm hover:shadow transition-all duration-200",children:e("pages.machines.createMachineTemplate")})]}),a.jsx("section",{className:"mt-6",children:a.jsx(k,{columns:b,data:d,totalItems:h,pageSize:5,pageSizeOptions:[5,10,25,100],showFirstLastButtons:!0,actionMenuItems:g,onActionClick:x,onQueryParamsChange:f})})]})}const A=N(function(){return a.jsx(j,{})});export{A as default};
