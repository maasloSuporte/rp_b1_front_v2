import{u as f,x as N,r as j,j as e}from"./vendor-react-GjWeapsa.js";import{c as v,d as w}from"./vendor-router-cHSbYr8A.js";import{a as u}from"./assets.service-F32CX5u3.js";import{u as q}from"./notification.service-DGIhKrzX.js";import"./api-Cdl3BoFR.js";function S(){const{t:s}=f("translation"),{id:o}=v(),m=w(),i=!!o,d=q(a=>a.showToast),{register:n,handleSubmit:p,formState:{errors:r},setValue:l,watch:x}=N({defaultValues:{name:"",type:"Text",description:"",value:"",userName:""}}),c=x("type");j.useEffect(()=>{i&&o&&g(Number(o))},[o,i]);const g=async a=>{try{const t=await u.getByIdAsset(a);console.log(t),l("name",t.name),l("type",t.type),l("description",t.description),l("value",t.value),l("userName",t.userName||"")}catch(t){console.error("Erro ao carregar asset:",t)}},y=async a=>{try{if(i&&o){const t={name:a.name,type:a.type,description:a.description,value:a.value,userName:a.userName,globalValue:a.globalValue,projectId:a.projectId};await u.updateAsset(Number(o),t),d("Sucess","Asset edited successfully","success"),m("/assets")}else{const t={name:a.name,type:a.type,description:a.description,value:a.value,userName:a.userName};await u.createAsset(t),d("Success","Asset created successfully","success"),m("/assets")}}catch(t){const b=t.response?.data?.message||"Falha ao salvar asset";d("Error",b,"error")}},h=a=>{const t=a.target.value;l("type",t),t==="Bool"?l("value","false"):(l("value",""),l("userName",""))};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>m("/assets"),className:"text-primary hover:text-primary/80 mb-4",children:["â† ",s("pages.asset.back")]}),e.jsx("h1",{className:"text-4xl font-semibold text-text-primary",children:s(i?"pages.asset.titleEdit":"pages.asset.titleCreate")})]}),e.jsxs("form",{onSubmit:p(y),className:"bg-white rounded-lg shadow-card p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s("pages.asset.name")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...n("name",{required:s("pages.asset.nameRequired"),minLength:{value:5,message:s("pages.asset.nameMinLength")}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"}),r.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.name.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s("pages.asset.type")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...n("type",{required:s("pages.asset.typeRequired")}),onChange:h,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"Text",children:s("pages.asset.typeText")}),e.jsx("option",{value:"Integer",children:s("pages.asset.typeInteger")}),e.jsx("option",{value:"Bool",children:s("pages.asset.typeBool")}),e.jsx("option",{value:"Credential",children:s("pages.asset.typeCredential")})]}),r.type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.type.message})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s("pages.asset.description")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{...n("description",{required:s("pages.asset.descriptionRequired"),minLength:{value:5,message:s("pages.asset.descriptionMinLength")}}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"}),r.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.description.message})]}),c==="Text"&&e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s("pages.asset.value")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...n("value",{required:s("pages.asset.valueRequired")}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"}),r.value&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.value.message})]}),c==="Integer"&&e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s("pages.asset.value")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",...n("value",{required:s("pages.asset.valueRequired")}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"}),r.value&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.value.message})]}),c==="Bool"&&e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s("pages.asset.value")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...n("value",{required:s("pages.asset.valueRequired")}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary",children:[e.jsx("option",{value:"true",children:s("common.true")}),e.jsx("option",{value:"false",children:s("common.false")})]}),r.value&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.value.message})]}),c==="Credential"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s("pages.asset.value")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",...n("value",{required:s("pages.asset.valueRequired")}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"}),r.value&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.value.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s("pages.asset.userName")," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...n("userName",{required:c==="Credential"?s("pages.asset.userNameRequired"):!1}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"}),r.userName&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.userName.message})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>m("/assets"),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:s("common.buttons.cancel")}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90",children:s(i?"common.buttons.save":"common.buttons.create")})]})]})]})}export{S as default};
