import{d as w,w as S}from"./vendor-router-cHSbYr8A.js";import{u as E,r as d,j as e}from"./vendor-react-GjWeapsa.js";import{_ as P}from"./preload-helper-BXl3LOEh.js";import{c as D,u as K}from"./users.service-DV2TtZrl.js";import{j as A}from"./job.service-Bn0VNBC8.js";import{s as C}from"./schedule.service-C92pRfiQ.js";import{a as U}from"./assets.service-F32CX5u3.js";import{q as I}from"./queues.service-_ltWKFCw.js";import{d as T}from"./devices.service-uF7n0LQ8.js";import"./api-Cdl3BoFR.js";const i={NEW:0,RUNNING:1,STOPPING:2,SUSPENDED:3,PENDING:4,TERMINATING:5,RESUMED:6,SUCCESSFUL:7,FAULTED:8,STOPPED:9},F={getDashboardData:async()=>{try{let a=0;try{a=((await D.getAllUsers("PageNumber=1&PageSize=100"))?.items??[]).filter(x=>x.userActive===!0).length}catch{a=(await K.getAllUsers()).filter(t=>t.enabled===!0).length}const[l,h,g,o,p]=await Promise.all([A.getAllJobs("PageNumber=1&PageSize=100"),C.getAllSchedule("PageNumber=1&PageSize=100"),U.getAllAssets("PageNumber=1&PageSize=100"),I.getAllQueues({pageNumber:1,pageSize:100}),T.getAllDevices("PageNumber=1&PageSize=100")]),b={users:a,processes:l.totalItems??l.items?.length??0,triggers:h.totalItems??h.items?.length??0,assets:g.totalItems??g.items?.length??0,queues:o.totalItems??o.items?.length??0,machines:p.totalItems??p.items?.length??0},r={running:0,stopping:0,suspended:0,pending:0,terminating:0,resumed:0},n={successful:0,faulted:0,stopped:0};return l.items&&l.items.forEach(m=>{const t=m.state;t===i.RUNNING?r.running++:t===i.STOPPING?r.stopping++:t===i.SUSPENDED?r.suspended++:t===i.PENDING?r.pending++:t===i.TERMINATING?r.terminating++:t===i.RESUMED&&r.resumed++,t===i.SUCCESSFUL?n.successful++:t===i.FAULTED?n.faulted++:t===i.STOPPED&&n.stopped++}),{stats:b,jobStatuses:r,jobHistory:n}}catch(a){throw console.error("Erro ao buscar dados do dashboard:",a),a}}};function z(){const{t:a}=E("translation"),l=w(),[h,g]=d.useState(!0),[o,p]=d.useState(null),[b,r]=d.useState([{id:1,titleKey:"users",value:"0",icon:"/assets/images/svgs/icon-user-male.svg",color:"primary",route:"/users"},{id:2,titleKey:"processes",value:"0",icon:"/assets/images/svgs/icon-briefcase.svg",color:"warning",route:"/jobs"},{id:3,titleKey:"triggers",value:"0",icon:"/assets/images/svgs/icon-mailbox.svg",color:"accent",route:"/scheduled"},{id:4,titleKey:"assets",value:"0",icon:"/assets/images/svgs/icon-favorites.svg",color:"error",route:"/assets"},{id:5,titleKey:"queues",value:"0",icon:"/assets/images/svgs/icon-speech-bubble.svg",color:"success",route:"/queues"},{id:6,titleKey:"machines",value:"0",icon:"/assets/images/svgs/icon-connect.svg",color:"accent",route:"/machines"}]),[n,m]=d.useState([{labelKey:"running",value:0},{labelKey:"stopping",value:0},{labelKey:"suspended",value:0},{labelKey:"pending",value:0},{labelKey:"terminating",value:0},{labelKey:"resumed",value:0}]),[t,x]=d.useState([0,0,0]),f={series:t,chart:{type:"donut",fontFamily:"'Plus Jakarta Sans', sans-serif",height:280,toolbar:{show:!1}},colors:["#FB7F0D","#2E186A","#181717"],plotOptions:{pie:{startAngle:0,endAngle:360,donut:{size:"75%",background:"transparent"}}},stroke:{show:!1},dataLabels:{enabled:!1},legend:{show:!1},tooltip:{enabled:!1}},v={series:[{name:"Modernize",data:[0,300,100,200,1200,100,500,100]},{name:"Spike Admin",data:[0,500,600,800,2800,900,800,2200]}],chart:{fontFamily:"inherit",foreColor:"#a1aab2",height:300,type:"area",toolbar:{show:!1}},dataLabels:{enabled:!1},markers:{size:3},stroke:{curve:"smooth",width:2},colors:["#FB7F0D","#13deb9"],legend:{show:!1},grid:{show:!0,strokeDashArray:0,borderColor:"rgba(0,0,0,0.1)",xaxis:{lines:{show:!0}},yaxis:{lines:{show:!0}}},xaxis:{type:"category",categories:["Feb","Mar","Apr","May","Jun","Jul","Aug","Sep"]},tooltip:{theme:"dark"},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.7,opacityTo:.3}}},y={primary:{bg:"bg-[#ecf2ff]",text:"text-[#5d87ff]"},warning:{bg:"bg-[#fef5e5]",text:"text-[#ffae1f]"},accent:{bg:"bg-[#e8f7ff]",text:"text-[#49beff]"},error:{bg:"bg-[#fdede8]",text:"text-[#fa896b]"},success:{bg:"bg-[#e6fffa]",text:"text-[#13deb9]"}};d.useEffect(()=>{j(),typeof window<"u"&&P(()=>import("./vendor-react-GjWeapsa.js").then(s=>s.O),[]).then(s=>{p(()=>s.default)})},[]);const j=async()=>{try{g(!0);const s=await F.getDashboardData();r([{id:1,titleKey:"users",value:c(s.stats.users),icon:"/assets/images/svgs/icon-user-male.svg",color:"primary",route:"/users"},{id:2,titleKey:"processes",value:c(s.stats.processes),icon:"/assets/images/svgs/icon-briefcase.svg",color:"warning",route:"/jobs"},{id:3,titleKey:"triggers",value:c(s.stats.triggers),icon:"/assets/images/svgs/icon-mailbox.svg",color:"accent",route:"/scheduled"},{id:4,titleKey:"assets",value:c(s.stats.assets),icon:"/assets/images/svgs/icon-favorites.svg",color:"error",route:"/assets"},{id:5,titleKey:"queues",value:c(s.stats.queues),icon:"/assets/images/svgs/icon-speech-bubble.svg",color:"success",route:"/queues"},{id:6,titleKey:"machines",value:c(s.stats.machines),icon:"/assets/images/svgs/icon-connect.svg",color:"accent",route:"/machines"}]),m([{labelKey:"running",value:s.jobStatuses.running},{labelKey:"stopping",value:s.jobStatuses.stopping},{labelKey:"suspended",value:s.jobStatuses.suspended},{labelKey:"pending",value:s.jobStatuses.pending},{labelKey:"terminating",value:s.jobStatuses.terminating},{labelKey:"resumed",value:s.jobStatuses.resumed}]),x([s.jobHistory.successful,s.jobHistory.faulted,s.jobHistory.stopped])}catch(s){console.error("Erro ao carregar dados do dashboard:",s)}finally{g(!1)}},c=s=>s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}k`:s.toString();return h?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:a("pages.dashboard.loadingData")})]})}):e.jsxs("div",{className:"min-h-screen bg-background min-w-0 max-w-full",children:[e.jsx("section",{className:"mb-8 min-w-0",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4 min-w-0",children:b.map(s=>{const u=y[s.color]||{bg:"bg-gray-100",text:"text-gray-500"};return e.jsx("div",{onClick:()=>s.route&&l(s.route),className:`min-w-0 ${u.bg} rounded-lg shadow-none p-4 sm:p-6 lg:p-8 cursor-pointer hover:shadow-lg transition-all ${s.route?"hover:scale-105":""}`,children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("img",{src:s.icon,alt:a(`pages.dashboard.${s.titleKey}`),width:"40",height:"40",className:"mb-2 rounded-full",style:{objectFit:"contain"},onError:N=>{N.target.style.display="none"}}),e.jsx("h4",{className:`text-sm font-semibold mb-2 mt-2 ${u.text}`,style:{fontSize:"14px",fontWeight:600},children:a(`pages.dashboard.${s.titleKey}`)}),e.jsx("h6",{className:`text-xl font-semibold ${u.text}`,style:{fontSize:"21px",fontWeight:600,marginTop:"4px"},children:s.value})]})},s.id)})})}),e.jsx("section",{className:"mb-8 min-w-0",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 min-w-0",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-card p-6 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-semibold text-gray-900",children:a("pages.dashboard.jobStatus")}),e.jsx("img",{src:"/assets/images/svgs/dashboard-dwa/Ellipse 59.svg",alt:"",className:"w-3 h-3 ml-2",onError:s=>{s.target.style.display="none"}})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 min-w-0",children:n.map((s,u)=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 text-center flex flex-col justify-between min-w-0",style:{minHeight:"230px"},children:[e.jsx("p",{className:"text-gray-500 text-base font-normal",style:{fontSize:"16.85px",lineHeight:"140%"},children:a(`common.states.${s.labelKey}`)}),e.jsx("span",{className:"text-gray-900 font-semibold",style:{fontSize:"15.82px",lineHeight:"120%",marginBottom:"30px"},children:s.value})]},u))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-card p-6 min-w-0",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6 text-center",children:a("pages.dashboard.jobsHistory")}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"flex flex-col gap-3 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/assets/images/svgs/dashboard-dwa/Ellipse 59.svg",alt:"",className:"w-4 h-4",onError:s=>{s.target.style.display="none"}}),e.jsxs("span",{className:"text-gray-700",children:[a("pages.dashboard.successful")," (",t[0],")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/assets/images/svgs/dashboard-dwa/Ellipse 73.svg",alt:"",className:"w-4 h-4",onError:s=>{s.target.style.display="none"}}),e.jsxs("span",{className:"text-gray-700",children:[a("pages.dashboard.faulted")," (",t[1],")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/assets/images/svgs/dashboard-dwa/Ellipse 72.svg",alt:"",className:"w-4 h-4",onError:s=>{s.target.style.display="none"}}),e.jsxs("span",{className:"text-gray-700",children:[a("pages.dashboard.stopped")," (",t[2],")"]})]})]}),e.jsx("div",{className:"w-full",children:o?e.jsx(o,{options:f,series:f.series,type:"donut",height:280}):e.jsx("div",{className:"h-[280px] flex items-center justify-center text-gray-500",children:a("pages.dashboard.loadingChart")})})]})]})]})}),e.jsx("section",{className:"min-w-0",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-card p-6 min-w-0",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-1",children:a("pages.dashboard.revenueUpdates")}),e.jsx("p",{className:"text-gray-600 text-sm",children:a("pages.dashboard.overviewProfit")}),e.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/assets/images/svgs/dashboard-dwa/Ellipse 59.svg",alt:"",className:"w-3 h-3",onError:s=>{s.target.style.display="none"}}),e.jsx("span",{className:"text-gray-700",children:a("pages.dashboard.modernize")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/assets/images/svgs/dashboard-dwa/Ellipse 73.svg",alt:"",className:"w-3 h-3",onError:s=>{s.target.style.display="none"}}),e.jsx("span",{className:"text-gray-700",children:a("pages.dashboard.spikeAdmin")})]})]})]}),e.jsx("div",{className:"mt-6",children:o?e.jsx(o,{options:v,series:v.series,type:"area",height:300}):e.jsx("div",{className:"h-[300px] flex items-center justify-center text-gray-500",children:a("pages.dashboard.loadingChart")})})]})})]})}const J=S(function(){return e.jsx(z,{})});export{J as default};
