import{d as b,w as S}from"./vendor-router-C5YTkdq4.js";import{r as a,j as t}from"./vendor-react-D3RE0R8o.js";import{s as l}from"./schedule.service-DkpaHhKp.js";import{u as g}from"./modal.service-DONi3Oau.js";import{u as N}from"./notification.service-CvsIel6B.js";import{D as w}from"./DynamicTable-BPyWbqtX.js";import"./api-BB9j10S9.js";function j(){const o=b(),n=g(e=>e.confirmDelete),i=N(e=>e.showToast),[d,u]=a.useState([]),[m,f]=a.useState(0),[r,h]=a.useState(""),x=[{key:"Name",label:"Name",filterable:!0,sortable:!1,filterType:"text"},{key:"Priority",label:"Priority",filterable:!1,sortable:!1,filterType:"text"},{key:"NextExecution",label:"Next execution",filterable:!1,sortable:!0,filterType:"text"},{key:"actions",label:"Actions",type:"action"}],p=[{label:"Edit",action:"edit",icon:"edit"},{label:"Deleted",action:"deleted",icon:"deleted"}];a.useEffect(()=>{c()},[r]);const c=async()=>{try{const e=await l.getAllSchedule(r);f(e.totalItems),u(e.items.map(s=>({id:s.id,Name:s.name,Priority:s.priority,NextExecution:s.nextExecution})))}catch(e){console.error("Erro ao buscar schedules:",e)}},y=async e=>{switch(e.action){case"edit":o(`/scheduled/${e.item.id}`);break;case"deleted":if(await n({itemName:e.item.Name}))try{await l.deleteSchedule({id:e.item.id}),i("Sucess","Schedule deleted successfully","success"),c()}catch{i("Error","Failed to delete schedule","error")}break}};return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-8",children:[t.jsx("h1",{className:"text-3xl sm:text-4xl font-semibold text-text-primary",children:"Schedules"}),t.jsx("button",{onClick:()=>o("/scheduled/create"),className:"inline-flex items-center justify-center px-5 py-2.5 rounded-xl font-medium text-white bg-orange hover:bg-orange/90 shadow-sm hover:shadow transition-all duration-200",children:"Create Schedule"})]}),t.jsx("section",{className:"mt-6",children:t.jsx(w,{columns:x,data:d,totalItems:m,pageSize:5,pageSizeOptions:[5,10,25,100],showFirstLastButtons:!0,actionMenuItems:p,onActionClick:y,onQueryParamsChange:h})})]})}const P=S(function(){return t.jsx(j,{})});export{P as default};
