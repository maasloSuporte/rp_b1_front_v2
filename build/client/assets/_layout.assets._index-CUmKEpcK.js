import{d as w,w as A}from"./vendor-router-C5YTkdq4.js";import{r as a,j as s}from"./vendor-react-D3RE0R8o.js";import{a as d}from"./assets.service-D2l1yFxQ.js";import{u as k}from"./modal.service-DONi3Oau.js";import{u as S}from"./notification.service-CvsIel6B.js";import{D as j}from"./DynamicTable-BPyWbqtX.js";import"./api-BB9j10S9.js";function N(){const o=w(),p=k(e=>e.confirmDelete),n=S(e=>e.showToast),[f,u]=a.useState([]),[y,x]=a.useState(0),[l,b]=a.useState(""),c=[{key:"name",sortKey:"name",label:"Name",filterable:!0,sortable:!1,filterType:"text"},{key:"type",label:"Type",filterable:!0,sortable:!1,filterType:"select",selectMode:"multiple",filterOptions:[]},{key:"description",label:"Description",filterable:!1,sortable:!1},{key:"actions",label:"Actions",type:"action"}],h=[{label:"Edit",action:"edit",icon:"edit"},{label:"Deleted",action:"deleted",icon:"block"}];a.useEffect(()=>{m()},[l]);const m=async()=>{try{const e=await d.getAllAssets(l);x(e.totalItems);const r=e.items.map(t=>({id:t.id,name:t.name,type:t.type,description:t.description}));u(r);const i=c.find(t=>t.key==="type");i&&(i.filterOptions=Array.from(new Set(r.map(t=>t.type))).map(t=>({id:t,label:t})))}catch(e){console.error("Erro ao carregar assets:",e)}},g=async e=>{switch(e.action){case"edit":o(`/assets/${e.item.id}`);break;case"deleted":if(await p({itemName:e.item.name}))try{await d.deleteAsset({id:e.item.id}),n("Sucess","Asset deleted successfully","success"),m()}catch{n("Error","Failed to delete asset","error")}break}};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-8",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl font-semibold text-text-primary",children:"Assets"}),s.jsx("button",{onClick:()=>o("/assets/create"),className:"inline-flex items-center justify-center px-5 py-2.5 rounded-xl font-medium text-white bg-orange hover:bg-orange/90 shadow-sm hover:shadow transition-all duration-200",children:"Create Asset"})]}),s.jsx("section",{className:"mt-6",children:s.jsx(j,{columns:c,data:f,totalItems:y,pageSize:5,pageSizeOptions:[5,10,25,100],showFirstLastButtons:!0,actionMenuItems:h,onActionClick:g,onQueryParamsChange:b})})]})}const _=A(function(){return s.jsx(N,{})});export{_ as default};
