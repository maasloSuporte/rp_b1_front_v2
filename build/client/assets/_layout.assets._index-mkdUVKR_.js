import{d as j,w as k}from"./vendor-router-cHSbYr8A.js";import{u as A,r as a,j as o}from"./vendor-react-GjWeapsa.js";import{a as d}from"./assets.service-F32CX5u3.js";import{u as N}from"./modal.service-0dNnnw9p.js";import{u as T}from"./notification.service-DGIhKrzX.js";import{D}from"./DynamicTable-2EKp7iLd.js";import"./api-Cdl3BoFR.js";function M(){const{t:e}=A("translation"),i=j(),p=N(t=>t.confirmDelete),n=T(t=>t.showToast),[u,f]=a.useState([]),[g,y]=a.useState(0),[c,b]=a.useState("PageNumber=1&PageSize=5&SortField=id&SortOrder=asc"),[l,x]=a.useState([]),h=a.useMemo(()=>[{key:"name",sortKey:"name",label:e("pages.assets.name"),filterable:!0,sortable:!1,filterType:"text"},{key:"type",label:e("pages.assets.type"),filterable:!0,sortable:!1,filterType:"select",selectMode:"multiple",filterOptions:l},{key:"description",label:e("pages.assets.description"),filterable:!1,sortable:!1},{key:"actions",label:e("pages.assets.actions"),type:"action"}],[e,l]),S=a.useMemo(()=>[{label:e("pages.assets.edit"),action:"edit",icon:"edit"},{label:e("pages.assets.deleted"),action:"deleted",icon:"block"}],[e]);a.useEffect(()=>{m()},[c]);const m=async()=>{try{const t=await d.getAllAssets(c);y(t.totalItems);const r=t.items.map(s=>({id:s.id,name:s.name,type:s.type,description:s.description}));f(r),x(Array.from(new Set(r.map(s=>s.type))).map(s=>({id:s,label:s})))}catch(t){console.error("Erro ao carregar assets:",t)}},w=async t=>{switch(t.action){case"edit":i(`/assets/${t.item.id}`);break;case"deleted":if(await p({itemName:t.item.name}))try{await d.deleteAsset({id:t.item.id}),n(e("common.states.success"),e("pages.assets.deleteSuccess"),"success"),m()}catch{n(e("common.states.error"),e("pages.assets.deleteError"),"error")}break}};return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-8",children:[o.jsx("h1",{className:"text-3xl sm:text-4xl font-semibold text-text-primary",children:e("pages.assets.title")}),o.jsx("button",{onClick:()=>i("/assets/create"),className:"inline-flex items-center justify-center px-5 py-2.5 rounded-xl font-medium text-white bg-orange hover:bg-orange/90 shadow-sm hover:shadow transition-all duration-200",children:e("pages.assets.createAsset")})]}),o.jsx("section",{className:"mt-6",children:o.jsx(D,{columns:h,data:u,totalItems:g,pageSize:5,pageSizeOptions:[5,10,25,100],showFirstLastButtons:!0,actionMenuItems:S,onActionClick:w,onQueryParamsChange:b})})]})}const _=k(function(){return o.jsx(M,{})});export{_ as default};
