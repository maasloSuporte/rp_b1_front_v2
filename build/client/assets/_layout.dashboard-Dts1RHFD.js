import{d as y,w as S}from"./vendor-router-C5YTkdq4.js";import{r as g,j as e}from"./vendor-react-D3RE0R8o.js";import{_ as w}from"./preload-helper-BXl3LOEh.js";import{u as E}from"./users.service-CI0k8rR4.js";import{j as P}from"./job.service-KAjP6H4k.js";import{s as D}from"./schedule.service-DkpaHhKp.js";import{a as A}from"./assets.service-D2l1yFxQ.js";import{q as C}from"./queues.service-DVY62-w_.js";import{d as T}from"./devices.service-BEkRjjz1.js";import"./api-BB9j10S9.js";const r={NEW:0,RUNNING:1,STOPPING:2,SUSPENDED:3,PENDING:4,TERMINATING:5,RESUMED:6,SUCCESSFUL:7,FAULTED:8,STOPPED:9},F={getDashboardData:async()=>{try{debugger;const[i,l,m,o,h,x]=await Promise.all([E.getAllUsers(),P.getAllJobs("PageNumber=1&PageSize=100"),D.getAllSchedule("PageNumber=1&PageSize=100"),A.getAllAssets("PageNumber=1&PageSize=100"),C.getAllQueues({pageNumber:1,pageSize:100}),T.getAllDevices("PageNumber=1&PageSize=100")]),p={users:i.length,processes:l.totalItems||l.items?.length||0,triggers:m.totalItems||m.items?.length||0,assets:o.totalItems||o.items?.length||0,queues:h.totalItems||h.items?.length||0,machines:x.totalItems||x.items?.length||0},a={running:0,stopping:0,suspended:0,pending:0,terminating:0,resumed:0},n={successful:0,faulted:0,stopped:0};return l.items&&l.items.forEach(c=>{const t=c.state;t===r.RUNNING?a.running++:t===r.STOPPING?a.stopping++:t===r.SUSPENDED?a.suspended++:t===r.PENDING?a.pending++:t===r.TERMINATING?a.terminating++:t===r.RESUMED&&a.resumed++,t===r.SUCCESSFUL?n.successful++:t===r.FAULTED?n.faulted++:t===r.STOPPED&&n.stopped++}),{stats:p,jobStatuses:a,jobHistory:n}}catch(i){throw console.error("Erro ao buscar dados do dashboard:",i),i}}};function I(){const i=y(),[l,m]=g.useState(!0),[o,h]=g.useState(null),[x,p]=g.useState([{id:1,title:"Users",value:"0",icon:"/assets/images/svgs/icon-user-male.svg",color:"primary",route:"/users"},{id:2,title:"Processes",value:"0",icon:"/assets/images/svgs/icon-briefcase.svg",color:"warning",route:"/jobs"},{id:3,title:"Triggers",value:"0",icon:"/assets/images/svgs/icon-mailbox.svg",color:"accent",route:"/scheduled"},{id:4,title:"Assets",value:"0",icon:"/assets/images/svgs/icon-favorites.svg",color:"error",route:"/assets"},{id:5,title:"Queues",value:"0",icon:"/assets/images/svgs/icon-speech-bubble.svg",color:"success",route:"/queues"},{id:6,title:"Machines",value:"0",icon:"/assets/images/svgs/icon-connect.svg",color:"accent",route:"/machines"}]),[a,n]=g.useState([{label:"Running",value:0},{label:"Stopping",value:0},{label:"Suspended",value:0},{label:"Pending",value:0},{label:"Terminating",value:0},{label:"Resumed",value:0}]),[c,t]=g.useState([0,0,0]),b={series:c,chart:{type:"donut",fontFamily:"'Plus Jakarta Sans', sans-serif",height:280,toolbar:{show:!1}},colors:["#FB7F0D","#2E186A","#181717"],plotOptions:{pie:{startAngle:0,endAngle:360,donut:{size:"75%",background:"transparent"}}},stroke:{show:!1},dataLabels:{enabled:!1},legend:{show:!1},tooltip:{enabled:!1}},f={series:[{name:"Modernize",data:[0,300,100,200,1200,100,500,100]},{name:"Spike Admin",data:[0,500,600,800,2800,900,800,2200]}],chart:{fontFamily:"inherit",foreColor:"#a1aab2",height:300,type:"area",toolbar:{show:!1}},dataLabels:{enabled:!1},markers:{size:3},stroke:{curve:"smooth",width:2},colors:["#FB7F0D","#13deb9"],legend:{show:!1},grid:{show:!0,strokeDashArray:0,borderColor:"rgba(0,0,0,0.1)",xaxis:{lines:{show:!0}},yaxis:{lines:{show:!0}}},xaxis:{type:"category",categories:["Feb","Mar","Apr","May","Jun","Jul","Aug","Sep"]},tooltip:{theme:"dark"},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.7,opacityTo:.3}}},v={primary:{bg:"bg-[#ecf2ff]",text:"text-[#5d87ff]"},warning:{bg:"bg-[#fef5e5]",text:"text-[#ffae1f]"},accent:{bg:"bg-[#e8f7ff]",text:"text-[#49beff]"},error:{bg:"bg-[#fdede8]",text:"text-[#fa896b]"},success:{bg:"bg-[#e6fffa]",text:"text-[#13deb9]"}};g.useEffect(()=>{j(),typeof window<"u"&&w(()=>import("./vendor-react-D3RE0R8o.js").then(s=>s.G),[]).then(s=>{h(()=>s.default)})},[]);const j=async()=>{try{m(!0);const s=await F.getDashboardData();p([{id:1,title:"Users",value:d(s.stats.users),icon:"/assets/images/svgs/icon-user-male.svg",color:"primary",route:"/users"},{id:2,title:"Processes",value:d(s.stats.processes),icon:"/assets/images/svgs/icon-briefcase.svg",color:"warning",route:"/jobs"},{id:3,title:"Triggers",value:d(s.stats.triggers),icon:"/assets/images/svgs/icon-mailbox.svg",color:"accent",route:"/scheduled"},{id:4,title:"Assets",value:d(s.stats.assets),icon:"/assets/images/svgs/icon-favorites.svg",color:"error",route:"/assets"},{id:5,title:"Queues",value:d(s.stats.queues),icon:"/assets/images/svgs/icon-speech-bubble.svg",color:"success",route:"/queues"},{id:6,title:"Machines",value:d(s.stats.machines),icon:"/assets/images/svgs/icon-connect.svg",color:"accent",route:"/machines"}]),n([{label:"Running",value:s.jobStatuses.running},{label:"Stopping",value:s.jobStatuses.stopping},{label:"Suspended",value:s.jobStatuses.suspended},{label:"Pending",value:s.jobStatuses.pending},{label:"Terminating",value:s.jobStatuses.terminating},{label:"Resumed",value:s.jobStatuses.resumed}]),t([s.jobHistory.successful,s.jobHistory.faulted,s.jobHistory.stopped])}catch(s){console.error("Erro ao carregar dados do dashboard:",s)}finally{m(!1)}},d=s=>s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}k`:s.toString();return l?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando dados do dashboard..."})]})}):e.jsxs("div",{className:"min-h-screen bg-background min-w-0 max-w-full",children:[e.jsx("section",{className:"mb-8 min-w-0",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4 min-w-0",children:x.map(s=>{const u=v[s.color]||{bg:"bg-gray-100",text:"text-gray-500"};return e.jsx("div",{onClick:()=>s.route&&i(s.route),className:`min-w-0 ${u.bg} rounded-lg shadow-none p-4 sm:p-6 lg:p-8 cursor-pointer hover:shadow-lg transition-all ${s.route?"hover:scale-105":""}`,children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("img",{src:s.icon,alt:s.title,width:"40",height:"40",className:"mb-2 rounded-full",style:{objectFit:"contain"},onError:N=>{console.error("Failed to load icon:",s.icon),N.target.style.display="none"}}),e.jsx("h4",{className:`text-sm font-semibold mb-2 mt-2 ${u.text}`,style:{fontSize:"14px",fontWeight:600},children:s.title}),e.jsx("h6",{className:`text-xl font-semibold ${u.text}`,style:{fontSize:"21px",fontWeight:600,marginTop:"4px"},children:s.value})]})},s.id)})})}),e.jsx("section",{className:"mb-8 min-w-0",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 min-w-0",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-card p-6 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-semibold text-gray-900",children:"Job Status"}),e.jsx("img",{src:"/assets/images/svgs/dashboard-dwa/Ellipse 59.svg",alt:"",className:"w-3 h-3 ml-2",onError:s=>{s.target.style.display="none"}})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 min-w-0",children:a.map((s,u)=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 text-center flex flex-col justify-between min-w-0",style:{minHeight:"230px"},children:[e.jsx("p",{className:"text-gray-500 text-base font-normal",style:{fontSize:"16.85px",lineHeight:"140%"},children:s.label}),e.jsx("span",{className:"text-gray-900 font-semibold",style:{fontSize:"15.82px",lineHeight:"120%",marginBottom:"30px"},children:s.value})]},u))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-card p-6 min-w-0",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6 text-center",children:"Jobs History"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"flex flex-col gap-3 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/assets/images/svgs/dashboard-dwa/Ellipse 59.svg",alt:"",className:"w-4 h-4",onError:s=>{s.target.style.display="none"}}),e.jsxs("span",{className:"text-gray-700",children:["Successful (",c[0],")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/assets/images/svgs/dashboard-dwa/Ellipse 73.svg",alt:"",className:"w-4 h-4",onError:s=>{s.target.style.display="none"}}),e.jsxs("span",{className:"text-gray-700",children:["Faulted (",c[1],")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/assets/images/svgs/dashboard-dwa/Ellipse 72.svg",alt:"",className:"w-4 h-4",onError:s=>{s.target.style.display="none"}}),e.jsxs("span",{className:"text-gray-700",children:["Stopped (",c[2],")"]})]})]}),e.jsx("div",{className:"w-full",children:o?e.jsx(o,{options:b,series:b.series,type:"donut",height:280}):e.jsx("div",{className:"h-[280px] flex items-center justify-center text-gray-500",children:"Carregando gráfico..."})})]})]})]})}),e.jsx("section",{className:"min-w-0",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-card p-6 min-w-0",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-1",children:"Revenue updates"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Overview of Profit"}),e.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/assets/images/svgs/dashboard-dwa/Ellipse 59.svg",alt:"",className:"w-3 h-3",onError:s=>{s.target.style.display="none"}}),e.jsx("span",{className:"text-gray-700",children:"Modernize"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/assets/images/svgs/dashboard-dwa/Ellipse 73.svg",alt:"",className:"w-3 h-3",onError:s=>{s.target.style.display="none"}}),e.jsx("span",{className:"text-gray-700",children:"Spike Admin"})]})]})]}),e.jsx("div",{className:"mt-6",children:o?e.jsx(o,{options:f,series:f.series,type:"area",height:300}):e.jsx("div",{className:"h-[300px] flex items-center justify-center text-gray-500",children:"Carregando gráfico..."})})]})})]})}const L=S(function(){return e.jsx(I,{})});export{L as default};
